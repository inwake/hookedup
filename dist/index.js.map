{"version":3,"file":"index.js","sources":["../src/hooks/usePrevious.tsx","../src/hooks/usePlatform.tsx","../src/hooks/useAppVisibility.tsx","../src/hooks/useDimensions.tsx","../src/hooks/useCurrentScreen.tsx","../src/hooks/usePosition.tsx"],"sourcesContent":["import {useRef, useEffect} from 'react'\n\nexport default function usePrevious(value) {\n\tconst ref = useRef(null)\n\tuseEffect(function() {\n\t\tref.current = value})\n\treturn ref.current\n}\n","import {Platform, Dimensions} from 'react-native'\r\n\r\nexport default function usePlatform() {\r\n  const {width=9, height=16} = Dimensions.get('window')\r\n  const aspectRatio = width / height\r\n\r\n  const android = Platform.OS === 'android'\r\n  const ios = Platform.OS === 'ios'\r\n  const web = Platform.OS === 'web'\r\n\r\n  const mobile = android || ios\r\n  const desktopWeb = web && aspectRatio && aspectRatio > 1\r\n  const platformMap = {android, ios, web, desktopWeb}\r\n\r\n  const platform = Object\r\n    .keys(platformMap)\r\n    .find(Boolean)\r\n\r\n  return {platform,\r\n    isAndroid: android,\r\n    isIos: ios,\r\n    isMobile: mobile,\r\n    isWeb: web,\r\n    isDesktopWeb: desktopWeb}\r\n}\r\n","import {useState, useEffect, useRef} from 'react'\r\nimport {AppState} from 'react-native'\r\n\r\nexport default function useAppVisibility() {\r\n  const appState = useRef(AppState.currentState)\r\n  const activeState = appState.current\r\n  const [foreground, setForeground] = useState(false)\r\n  const [background, setBackground] = useState(false)\r\n  const isActive = activeState === 'active'\r\n\r\n  useEffect(function() {\r\n    setBackground(false)\r\n    setForeground(true)\r\n  }, [])\r\n\r\n  useEffect(function() {\r\n    const subscription = AppState\r\n      .addEventListener('change', onChange)\r\n\r\n    function onChange(nextAppState) {\r\n      appState.current = nextAppState\r\n\r\n      const nextActive = nextAppState === 'active'\r\n      const nextInactive = nextAppState === 'inactive'\r\n      setForeground(nextActive)\r\n      setBackground(nextInactive)}\r\n    return function() {\r\n      subscription?.remove()}\r\n  })\r\n\r\n  return {activeState,\r\n    isActive,\r\n    foreground,\r\n    background}\r\n}\r\n","import {useState, useEffect} from 'react'\nimport {Dimensions} from 'react-native'\nimport {useSafeAreaFrame} from 'react-native-safe-area-context'\n\nexport default function useDimensions({isWeb, isDesktopWeb}) {\n\tconst [dimensions, setDimensions] = useState(Dimensions.get('window'))\n\tconst safeAreaFrame = useSafeAreaFrame()\n\n\tuseEffect(() => {\n\t\tupdateDimensionsForPlatform()\n\t\tconst subscription = Dimensions\n\t\t\t.addEventListener('change', updateDimensionsForPlatform)\n\n\t\tfunction updateDimensionsForPlatform() {\n\t\t\tconst windowDimensions = Dimensions.get('window')\n\t\t\tconst {width, height} = isWeb || isDesktopWeb ?\n\t\t\t\twindowDimensions : safeAreaFrame\n\t\t\tconst {scale, fontScale} = windowDimensions\n\t\t\tsetDimensions({width, height, scale, fontScale})}\n\n\t\treturn function() {subscription?.remove()}\n\t}, [isWeb, isDesktopWeb, safeAreaFrame])\n\n\treturn dimensions\n}\n","import {useState, useEffect} from 'react'\nimport {Dimensions} from 'react-native'\n\nconst screens = [{size: 'sm', width: 480},\n\t{size: 'md', width: 720},\n\t{size: 'lg', width: 1080},\n\t{size: 'xl', width: 1440}]\n\nexport default function useCurrentScreen() {\n\tconst [currentScreen, setCurrentScreen] = useState('md')\n\tconst dimensions = Dimensions.get('window')\n\n\tuseEffect(() => {\n\t\tsetCurrentScreen(screens\n\t\t\t.find(function(screen) {\n\t\t\t\tdimensions.width > screen.width\n\t\t\t})?.size || 'xs')\n\t}, [dimensions.width])\n\n\treturn currentScreen\n}\n","import {useState, useEffect} from 'react'\nimport Geolocation from '@react-native-community/geolocation'\n\ntype UsePositionProps = {\n  config?: Config\n  getOptions?: GetOptions\n  streamOptions?: StreamOptions\n  streamPosition?: boolean}\n\ntype Config = {\n  skipPermissionRequests: boolean\n  enableBackgroundLocationUpdates: boolean\n  authorizationLevel: 'whenInUse' | 'always' | 'auto'\n  locationProvider: 'playServices' | 'android' | 'auto'}\n\ntype GetOptions = {\n  enableHighAccuracy: boolean\n  timeout: number\n  maximumAge: number}\n\ntype StreamOptions = {\n  enableHighAccuracy: boolean\n  interval: number\n  fastestInterval: number\n  timeout: number\n  maximumAge: number\n  distanceFilter: number}\n\ninterface Position {\n\tlatitude: number\n\tlongitude: number\n\taccuracy: number\n\taltitude: number\n\taltitudeAccuracy: number\n\ttimestamp: number}\n\ninterface Motion {\n\tspeed: number\n\theading: number}\n\ntype PositionError = {\n\tmessage: string\n\tstatus: string\n\tcode: number}\n\nconst defaultCconfig: Config = {skipPermissionRequests: false,\n\tenableBackgroundLocationUpdates: false,\n\tauthorizationLevel: 'whenInUse',\n\tlocationProvider: 'auto'}\n\nconst defaultGetOptions = {enableHighAccuracy: true,\n\ttimeout: 10000, maximumAge: 10000}\n\nconst defaultStreamOptions = {enableHighAccuracy: true,\n\tinterval: 2500, fastestInterval: 1000,\n\ttimeout: 10000, maximumAge: 10000,\n\tdistanceFilter: 25}\n\nexport default function usePosition(\n\t{streamPosition=false,\n\t\tconfig: customConfig = defaultCconfig,\n\t\tgetOptions: customGetOptions = defaultGetOptions,\n\t\tstreamOptions: customStreamOptions = defaultStreamOptions}\n      : UsePositionProps = {}) {\n\n\tconst config = {...defaultCconfig,\n\t\t...customConfig}\n\tconst getOptions = {...defaultGetOptions,\n\t\t...customGetOptions}\n\tconst streamOptions = {...defaultStreamOptions,\n\t\t...customStreamOptions}\n\n\tconst [position, setPosition] = useState<Position | null>(null)\n\tconst [motion, setMotion] = useState<Motion | null>(null)\n\tconst [error, setError] = useState<PositionError>()\n\tconst [ready, setReady] = useState(false)\n\n\tuseEffect(function() {\n\t\tGeolocation.setRNConfiguration(config)\n\t}, [])\n\n\tuseEffect(function() {\n\t\tconst id = setupPositionStream()\n\n\t\tfunction setupPositionStream() {\n\t\t\tif (!streamPosition) return false\n\t\t\telse return Geolocation\n\t\t\t\t.watchPosition(onPositionUpdate,\n\t\t\t\t\tonUpdateError, streamOptions)}\n\n\t\tfunction cleanUpPositionStream(id) {\n\t\t\tif (id) Geolocation.clearWatch(id)}\n\n\t\treturn function() {cleanUpPositionStream(id)}\n\t}, [streamPosition, streamOptions])\n\n\tfunction onPositionUpdate(data): Position {\n\t\tconst {coords, timestamp} = data\n\t\tconst motionData = {speed: coords.speed,\n\t\t\theading: coords.heading}\n\t\tconst positionData =\n\t\t\t{latitude: coords.latitude,\n\t\t\t\tlongitude: coords.longitude,\n\t\t\t\taccuracy: coords.accuracy,\n\t\t\t\taltitude: coords.altitude,\n\t\t\t\taltitudeAccuracy: coords\n\t\t\t\t\t.altitudeAccuracy,\n\t\t\t\ttimestamp: timestamp}\n\t\tsetPosition(positionData)\n\t\tsetMotion(motionData)\n\t\tsetReady(true)\n\n\t\treturn positionData}\n\n\tfunction onUpdateError({code, message, ...rest}): PositionError {\n\t\tconst errKeys = ['PERMISSION_DENIED', 'POSITION_UNAVAILABLE', 'TIMEOUT']\n\n\t\tconst status = Object.keys(rest)\n\t\t\t.find(function(key) {\n\t\t\t\tconst isErr = rest[key]\n\t\t\t\treturn Boolean(Number(isErr))\n          && errKeys.includes(key as string)})\n      || 'UNKNOWN_ERROR'\n\n\t\tconst nextError: PositionError\n      = {status, message, code}\n\n\t\tif (nextError) {\n\t\t\tsetError(nextError)\n\t\t\tsetReady(true)\n\t\t\treturn nextError}\n\n\t\tthrow new Error('Error object is undefined')\n\t}\n\n\tfunction getPosition(): Promise<Position> {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tfunction success(positionData) {\n\t\t\t\tconst resolvedData = onPositionUpdate(positionData)\n\t\t\t\tresolve(resolvedData)}\n\n\t\t\tfunction failure(error) {\n\t\t\t\tonUpdateError(error)\n\t\t\t\treject(error)}\n\n\t\t\tGeolocation\n\t\t\t\t.getCurrentPosition(success,\n\t\t\t\t\tfailure, getOptions)\n\t\t})\n\t}\n\n\treturn {position, motion,\n\t\terror, ready,\n\t\tgetPosition}\n}\n"],"names":["usePrevious","value","ref","useRef","useEffect","current","usePlatform","_a","Dimensions","get","_b","_c","aspectRatio","android","Platform","OS","ios","web","mobile","desktopWeb","platform","Object","keys","find","Boolean","isAndroid","isIos","isMobile","isWeb","isDesktopWeb","useAppVisibility","appState","AppState","currentState","activeState","useState","foreground","setForeground","background","setBackground","isActive","subscription","addEventListener","nextAppState","nextInactive","remove","useDimensions","dimensions","setDimensions","safeAreaFrame","useSafeAreaFrame","updateDimensionsForPlatform","windowDimensions","width","height","scale","fontScale","screens","size","useCurrentScreen","currentScreen","setCurrentScreen","screen","defaultCconfig","skipPermissionRequests","enableBackgroundLocationUpdates","authorizationLevel","locationProvider","defaultGetOptions","enableHighAccuracy","timeout","maximumAge","defaultStreamOptions","interval","fastestInterval","distanceFilter","usePosition","streamPosition","_d","customConfig","_e","customGetOptions","_f","customStreamOptions","config","getOptions","streamOptions","_g","position","setPosition","_h","motion","setMotion","_j","error","setError","_k","ready","setReady","onPositionUpdate","data","coords","timestamp","motionData","speed","heading","positionData","latitude","longitude","accuracy","altitude","altitudeAccuracy","onUpdateError","code","message","rest","errKeys","nextError","status","key","isErr","Number","includes","Geolocation","setRNConfiguration","id","watchPosition","clearWatch","getPosition","Promise","resolve","reject","getCurrentPosition","resolvedData"],"mappings":"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"}