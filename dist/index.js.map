{"version":3,"file":"index.js","sources":["../src/hooks/usePrevious.tsx","../src/hooks/usePlatform.tsx","../src/hooks/useAppVisibility.tsx","../src/hooks/useDimensions.tsx","../src/hooks/useCurrentScreen.tsx","../src/hooks/usePosition.tsx"],"sourcesContent":["import {useRef, useEffect} from 'react'\r\n\r\nexport default function usePrevious(value) {\r\n  const ref = useRef(null)\r\n  useEffect(function() {\r\n    ref.current = value})\r\n  return ref.current\r\n}\r\n","import {Platform, Dimensions} from 'react-native'\r\n\r\nexport default function usePlatform() {\r\n  const {width=9, height=16} = Dimensions.get('window')\r\n  const aspectRatio = width / height\r\n\r\n  const android = Platform.OS === 'android'\r\n  const ios = Platform.OS === 'ios'\r\n  const web = Platform.OS === 'web'\r\n\r\n  const mobile = android || ios\r\n  const desktopWeb = web && aspectRatio && aspectRatio > 1\r\n  const platformMap = {android, ios, web, desktopWeb}\r\n\r\n  const platform = Object\r\n    .keys(platformMap)\r\n    .find(Boolean)\r\n\r\n  return {platform,\r\n    isAndroid: android,\r\n    isIos: ios,\r\n    isMobile: mobile,\r\n    isWeb: web,\r\n    isDesktopWeb: desktopWeb}\r\n}\r\n","import {useState, useEffect, useRef} from 'react'\r\nimport {AppState} from 'react-native'\r\n\r\nexport default function useAppVisibility() {\r\n  const appState = useRef(AppState.currentState)\r\n  const activeState = appState.current\r\n  const [foreground, setForeground] = useState(false)\r\n  const [background, setBackground] = useState(false)\r\n  const isActive = activeState === 'active'\r\n\r\n  useEffect(function() {\r\n    setBackground(false)\r\n    setForeground(true)\r\n  }, [])\r\n\r\n  useEffect(function() {\r\n    const subscription = AppState\r\n      .addEventListener('change', onChange)\r\n\r\n    function onChange(nextAppState) {\r\n      appState.current = nextAppState\r\n\r\n      const nextActive = nextAppState === 'active'\r\n      const nextInactive = nextAppState === 'inactive'\r\n      setForeground(nextActive)\r\n      setBackground(nextInactive)}\r\n    return function() {\r\n      subscription?.remove()}\r\n  })\r\n\r\n  return {activeState,\r\n    isActive,\r\n    foreground,\r\n    background}\r\n}\r\n","import {useState, useEffect} from 'react'\nimport {Dimensions} from 'react-native'\nimport {useSafeAreaFrame} from 'react-native-safe-area-context'\n\nexport default function useDimensions({isWeb, isDesktopWeb}) {\n\tconst [dimensions, setDimensions] = useState(Dimensions.get('window'))\n\tconst safeAreaFrame = useSafeAreaFrame()\n\n\tuseEffect(() => {\n\t\tupdateDimensionsForPlatform()\n\t\tconst subscription = Dimensions\n\t\t\t.addEventListener('change', updateDimensionsForPlatform)\n\n\t\tfunction updateDimensionsForPlatform() {\n\t\t\tconst windowDimensions = Dimensions.get('window')\n\t\t\tconst {width, height} = isWeb || isDesktopWeb ?\n\t\t\t\twindowDimensions : safeAreaFrame\n\t\t\tconst {scale, fontScale} = windowDimensions\n\t\t\tsetDimensions({width, height, scale, fontScale})}\n\n\t\treturn function() {subscription?.remove()}\n\t}, [isWeb, isDesktopWeb, safeAreaFrame])\n\n\treturn dimensions\n}\n","import {useState, useEffect} from 'react'\nimport {Dimensions} from 'react-native'\n\nconst screens = [{size: 'sm', width: 480},\n\t{size: 'md', width: 720},\n\t{size: 'lg', width: 1080},\n\t{size: 'xl', width: 1440}]\n\nexport default function useCurrentScreen() {\n\tconst [currentScreen, setCurrentScreen] = useState('md')\n\tconst dimensions = Dimensions.get('window')\n\n\tuseEffect(() => {\n\t\tsetCurrentScreen(screens\n\t\t\t.find(function(screen) {\n\t\t\t\tdimensions.width > screen.width\n\t\t\t})?.size || 'xs')\n\t}, [dimensions.width])\n\n\treturn currentScreen\n}\n","import {useState, useEffect} from 'react'\nimport Geolocation from '@react-native-community/geolocation'\n\ninterface UsePositionProps {\n  config?: typeof config\n  getOptions?: typeof getOptions\n  streamOptions?: typeof streamOptions\n  streamPosition?: boolean\n}\n\ninterface Position {\n\tlatitude: number\n\tlongitude: number\n\taccuracy: number\n\taltitude: number\n\taltitudeAccuracy: number\n\ttimestamp: number\n}\n\ninterface Motion {\n\tspeed: number\n\theading: number\n}\n\ninterface PositionError {\n\tmessage: string\n\tstatus: string\n\tcode: number\n}\n\nconst config = {skipPermissionRequests: false,\n\tenableBackgroundLocationUpdates: false,\n\tauthorizationLevel: 'whenInUse',\n\tlocationProvider: 'auto'}\n\nconst getOptions = {enableHighAccuracy: true,\n\ttimeout: 10000, maximumAge: 10000}\n\nconst streamOptions = {enableHighAccuracy: true,\n\tinterval: 2500, fastestInterval: 1000,\n\ttimeout: 10000, maximumAge: 10000,\n\tdistanceFilter: 25}\n\nexport default function usePosition(props: UsePositionProps={}) {\n\tconst {config,\n\t\tgetOptions,\n\t\tstreamPosition} = props\n\tconst [position, setPosition] = useState<Position | null>(null)\n\tconst [motion, setMotion] = useState<Motion | null>(null)\n\tconst [error, setError] = useState<PositionError>()\n\tconst [ready, setReady] = useState(false)\n\n\tuseEffect(function() {\n\t\t(Geolocation as any)\n\t\t\t.setRNConfiguration(config)\n\t}, [])\n\n\tuseEffect(function() {\n\t\tlet id\n\n\t\tif (streamPosition) setupPositionStream()\n\t\telse if (!position) getPosition()\n\n\t\tfunction setupPositionStream() {\n\t\t\tif (streamPosition) {\n\t\t\t\tid = Geolocation\n\t\t\t\t\t.watchPosition(onPositionUpdate,\n\t\t\t\t\t\tonUpdateError,\n\t\t\t\t\t\tstreamOptions)}}\n\n\t\tfunction cleanUpPositionStream() {\n\t\t\tGeolocation.clearWatch(id)}\n\n\t\treturn cleanUpPositionStream\n\t}, [streamPosition])\n\n\tfunction onPositionUpdate(data: any): Position {\n\t\tconst {coords, timestamp} = data\n\t\tconst motionData = {speed: coords.speed,\n\t\t\theading: coords.heading}\n\t\tconst positionData =\n\t\t\t{latitude: coords.latitude,\n\t\t\t\tlongitude: coords.longitude,\n\t\t\t\taccuracy: coords.accuracy,\n\t\t\t\taltitude: coords.altitude,\n\t\t\t\taltitudeAccuracy: coords\n\t\t\t\t\t.altitudeAccuracy,\n\t\t\t\ttimestamp: timestamp}\n\t\tsetPosition(positionData)\n\t\tsetMotion(motionData)\n\t\tsetReady(true)\n\n\t\treturn positionData}\n\n\tfunction onUpdateError({code, message,\n\t\tPERMISSION_DENIED: denied,\n\t\tPOSITION_UNAVAILABLE: unavailable,\n\t\tTIMEOUT: timeout}: any) {\n\t\tconst codeMap = {denied,\n\t\t\tunavailable,\n\t\t\ttimeout}\n\t\tconst status = codeMap[code]\n\t\tsetError({message, status, code})\n\t\tsetReady(true)}\n\n\tfunction getPosition() {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tfunction success(positionData) {\n\t\t\t\tconst resolvedData\n\t\t\t\t\t= onPositionUpdate(positionData)\n\t\t\t\tresolve(resolvedData)}\n\t\t\tfunction failure(error) {\n\t\t\t\tonUpdateError(error)\n\t\t\t\treject(error)}\n\t\t\tGeolocation.getCurrentPosition(success, failure, getOptions)})}\n\n\treturn {position, motion,\n\t\terror, ready,\n\t\tgetPosition}\n}\n"],"names":["usePrevious","value","ref","useRef","useEffect","current","usePlatform","_a","Dimensions","get","_b","_c","aspectRatio","android","Platform","OS","ios","web","mobile","desktopWeb","platform","Object","keys","find","Boolean","isAndroid","isIos","isMobile","isWeb","isDesktopWeb","useAppVisibility","appState","AppState","currentState","activeState","useState","foreground","setForeground","background","setBackground","isActive","subscription","addEventListener","nextAppState","nextInactive","remove","useDimensions","dimensions","setDimensions","safeAreaFrame","useSafeAreaFrame","updateDimensionsForPlatform","windowDimensions","width","height","scale","fontScale","screens","size","useCurrentScreen","currentScreen","setCurrentScreen","screen","streamOptions","enableHighAccuracy","interval","fastestInterval","timeout","maximumAge","distanceFilter","usePosition","props","config","getOptions","streamPosition","position","setPosition","motion","setMotion","error","setError","_d","ready","setReady","onPositionUpdate","data","coords","timestamp","motionData","speed","heading","positionData","latitude","longitude","accuracy","altitude","altitudeAccuracy","onUpdateError","code","message","denied","unavailable","status","getPosition","Promise","resolve","reject","Geolocation","getCurrentPosition","resolvedData","setRNConfiguration","id","watchPosition","clearWatch"],"mappings":"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"}