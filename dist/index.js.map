{"version":3,"file":"index.js","sources":["../src/hooks/usePrevious.tsx","../src/hooks/usePlatform.tsx","../src/hooks/useAppVisibility.tsx","../src/hooks/useDimensions.tsx","../src/hooks/useCurrentScreen.tsx","../src/hooks/usePosition.tsx"],"sourcesContent":["import {useRef, useEffect} from 'react'\r\n\r\nexport default function usePrevious(value) {\r\n  const ref = useRef(null)\r\n  useEffect(function() {\r\n    ref.current = value})\r\n  return ref.current\r\n}\r\n","import {Platform, Dimensions} from 'react-native'\r\n\r\nexport default function usePlatform() {\r\n  const {width=9, height=16} = Dimensions.get('window')\r\n  const aspectRatio = width / height\r\n\r\n  const android = Platform.OS === 'android'\r\n  const ios = Platform.OS === 'ios'\r\n  const web = Platform.OS === 'web'\r\n\r\n  const mobile = android || ios\r\n  const desktopWeb = web && aspectRatio && aspectRatio > 1\r\n  const platformMap = {android, ios, web, desktopWeb}\r\n\r\n  const platform = Object\r\n    .keys(platformMap)\r\n    .find(Boolean)\r\n\r\n  return {platform,\r\n    isAndroid: android,\r\n    isIos: ios,\r\n    isMobile: mobile,\r\n    isWeb: web,\r\n    isDesktopWeb: desktopWeb}\r\n}\r\n","import {useState, useEffect, useRef} from 'react'\r\nimport {AppState} from 'react-native'\r\n\r\nexport default function useAppVisibility() {\r\n  const appState = useRef(AppState.currentState)\r\n  const activeState = appState.current\r\n  const [foreground, setForeground] = useState(false)\r\n  const [background, setBackground] = useState(false)\r\n  const isActive = activeState === 'active'\r\n\r\n  useEffect(function() {\r\n    setBackground(false)\r\n    setForeground(true)\r\n  }, [])\r\n\r\n  useEffect(function() {\r\n    const subscription = AppState\r\n      .addEventListener('change', onChange)\r\n\r\n    function onChange(nextAppState) {\r\n      appState.current = nextAppState\r\n\r\n      const nextActive = nextAppState === 'active'\r\n      const nextInactive = nextAppState === 'inactive'\r\n      setForeground(nextActive)\r\n      setBackground(nextInactive)}\r\n    return function() {\r\n      subscription?.remove()}\r\n  })\r\n\r\n  return {activeState,\r\n    isActive,\r\n    foreground,\r\n    background}\r\n}\r\n","import {useState, useEffect} from 'react'\nimport {Dimensions} from 'react-native'\nimport {useSafeAreaFrame} from 'react-native-safe-area-context'\n\nexport default function useDimensions({isWeb, isDesktopWeb}) {\n\tconst [dimensions, setDimensions] = useState(Dimensions.get('window'))\n\tconst safeAreaFrame = useSafeAreaFrame()\n\n\tuseEffect(() => {\n\t\tupdateDimensionsForPlatform()\n\t\tconst subscription = Dimensions\n\t\t\t.addEventListener('change', updateDimensionsForPlatform)\n\n\t\tfunction updateDimensionsForPlatform() {\n\t\t\tconst windowDimensions = Dimensions.get('window')\n\t\t\tconst {width, height} = isWeb || isDesktopWeb ?\n\t\t\t\twindowDimensions : safeAreaFrame\n\t\t\tconst {scale, fontScale} = windowDimensions\n\t\t\tsetDimensions({width, height, scale, fontScale})}\n\n\t\treturn function() {subscription?.remove()}\n\t}, [isWeb, isDesktopWeb, safeAreaFrame])\n\n\treturn dimensions\n}\n","import {useState, useEffect} from 'react'\nimport {Dimensions} from 'react-native'\n\nconst screens = [{size: 'sm', width: 480},\n\t{size: 'md', width: 720},\n\t{size: 'lg', width: 1080},\n\t{size: 'xl', width: 1440}]\n\nexport default function useCurrentScreen() {\n\tconst [currentScreen, setCurrentScreen] = useState('md')\n\tconst dimensions = Dimensions.get('window')\n\n\tuseEffect(() => {\n\t\tsetCurrentScreen(screens\n\t\t\t.find(function(screen) {\n\t\t\t\tdimensions.width > screen.width\n\t\t\t})?.size || 'xs')\n\t}, [dimensions.width])\n\n\treturn currentScreen\n}\n","import {useState, useEffect} from 'react'\nimport Geolocation from '@react-native-community/geolocation'\n\nconst config = {skipPermissionRequests: false,\n\tenableBackgroundLocationUpdates: false,\n\tauthorizationLevel: 'whenInUse',\n\tlocationProvider: 'auto'}\n\nconst getOptions = {enableHighAccuracy: true,\n\ttimeout: 10000,\n\tmaximumAge: 10000}\n\nconst watchOptions = {enableHighAccuracy: true,\n\tinterval: 2500,\n\tfastestInterval: 1000,\n\tdistanceFilter: 25,\n\ttimeout: 10000,\n\tmaximumAge: 10000}\n\nexport default function usePosition() {\n\tconst [position, setPosition] = useState(null)\n\tconst [motion, setMotion] = useState(null)\n\tconst [error, setError] = useState(null)\n\tconst [ready, setReady] = useState(false)\n\n\tuseEffect(function() {\n\t\t// @ts-ignore\n\t\tGeolocation.setRNConfiguration(config)\n\t}, [])\n\n\tfunction onPositionUpdate(data) {\n\t\tconst {coords, timestamp} = data\n\t\tconst motionData = {speed: coords.speed, heading: coords.heading}\n\t\tconst positionData = {latitude: coords.latitude,\n\t\t\tlongitude: coords.longitude,\n\t\t\taccuracy: coords.accuracy,\n\t\t\taltitude: coords.altitude,\n\t\t\taltitudeAccuracy: coords.altitudeAccuracy,\n\t\t\ttimestamp: timestamp}\n\n\t\t// Set state\n\t\t// @ts-ignore\n\t\tsetPosition(positionData)\n\t\t// @ts-ignore\n\t\tsetMotion(motionData)\n\t\tsetReady(true)\n\n\t\t// Return the processed data\n\t\treturn positionData}\n\n\tfunction onUpdateError({code, message,\n\t\tPERMISSION_DENIED: denied,\n\t\tPOSITION_UNAVAILABLE: unavailable,\n\t\tTIMEOUT: timeout}) {\n\t\tconst codeMap = {denied,\n\t\t\tunavailable,\n\t\t\ttimeout}\n\t\tconst status = codeMap[code]\n\t\t// @ts-ignore\n\t\tsetError({message, status, code})\n\t\tsetReady(true)}\n\n\tfunction getPosition() {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tfunction success(positionData) {\n\t\t\t\tconst resolvedData = onPositionUpdate(positionData)\n\t\t\t\tresolve(resolvedData)}\n\t\t\tfunction failure(error) {\n\t\t\t\tonUpdateError(error)\n\t\t\t\treject(error)}\n\t\t\tGeolocation.getCurrentPosition(success, failure, getOptions)})}\n\n\tfunction watchPosition() {\n\t\tGeolocation\n\t\t\t.watchPosition(onPositionUpdate,\n\t\t\t\tonUpdateError,\n\t\t\t\twatchOptions)}\n\n\t// useEffect(() => {\n\t// \tGeolocation.requestForegroundPermissionsAsync()\n\t// \t\t.then(function({status}) {\n\t// \t\t\tif (status !== 'granted') {\n\t// \t\t\t\tsetLocationError('Permission to access location was denied')\n\t// \t\t\t\tsetLocationReady(true)\n\t// \t\t\t\treturn}\n\n\t// \t\t\tGeolocation.getCurrentPositionAsync({accuracy: Geolocation.Accuracy.High})\n\t// \t\t\t\t.then(function(location) {\n\t// \t\t\t\t\tsetLocation(location)\n\t// \t\t\t\t\tsetLocationReady(true)\n\t// \t\t\t\t}).catch(function(error) {\n\t// \t\t\t\t\tsetLocationError(error)\n\t// \t\t\t\t\tsetLocationReady(true)})})\n\t// }, [setLocationReady,\n\t// \tsetLocationError,\n\t// \tsetLocation])\n\n\treturn {position, motion,\n\t\terror, ready,\n\t\tgetPosition,\n\t\twatchPosition}\n}\n"],"names":["usePrevious","value","ref","useRef","useEffect","current","usePlatform","_a","Dimensions","get","_b","_c","aspectRatio","android","Platform","OS","ios","web","mobile","desktopWeb","platform","Object","keys","find","Boolean","isAndroid","isIos","isMobile","isWeb","isDesktopWeb","useAppVisibility","appState","AppState","currentState","activeState","useState","foreground","setForeground","background","setBackground","isActive","subscription","addEventListener","nextAppState","nextInactive","remove","useDimensions","dimensions","setDimensions","safeAreaFrame","useSafeAreaFrame","updateDimensionsForPlatform","windowDimensions","width","height","scale","fontScale","screens","size","useCurrentScreen","currentScreen","setCurrentScreen","screen","config","skipPermissionRequests","enableBackgroundLocationUpdates","authorizationLevel","locationProvider","getOptions","enableHighAccuracy","timeout","maximumAge","watchOptions","interval","fastestInterval","distanceFilter","usePosition","position","setPosition","motion","setMotion","error","setError","_d","ready","setReady","onPositionUpdate","data","coords","timestamp","motionData","speed","heading","positionData","latitude","longitude","accuracy","altitude","altitudeAccuracy","onUpdateError","code","message","denied","unavailable","status","Geolocation","setRNConfiguration","getPosition","Promise","resolve","reject","getCurrentPosition","resolvedData","watchPosition"],"mappings":"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"}